{% extends 'core/base.html' %}
{% load staticfiles %}
{% load humanize %}

{% block content %}

    <h1>
        <span>{{ object.name }}</span>
        <div class="btn-group float-lg-right" role="group" aria-label="Data Group Modification">
            <a class="btn btn-info btn-sm" role="button" title="list" href="{% url "data_group_list" %}">
                <span class="oi oi-list"></span> </a>
            <a class="btn btn-success btn-sm" role="button" title="edit" href="{% url "data_group_edit" object.id %}">
                <span class="oi oi-pencil"></span> </a>
            <a class="btn btn-danger btn-sm" role="button" title="delete"
               href="{% url "data_group_delete" object.id %}">
                <span class="oi oi-trash"></span> </a>
        </div>
    </h1>
    <dl class="row">
        <dt class="col-sm-3">Description</dt>
        <dd class="col-sm-9">{{ object.description }}</dd>
        <dt class="col-sm-3">Downloaded by</dt>
        <dd class="col-sm-9">{{ object.downloaded_by }}</dd>
        <dt class="col-sm-3">Date Downloaded</dt>
        <dd class="col-sm-9">{{ object.downloaded_at }}</dd>
        <dt class="col-sm-3"><abbr title="Script source repository">Scraper Script URL</abbr></dt>
        <dd class="col-sm-9">
            <a href="{{ object.extraction_script }}" target="_blank">{{ object.extraction_script }}</a>
        </dd>
        <dt class="col-sm-3">Data Source</dt>
        <dd class="col-sm-9">{{ object.data_source }}</dd>
        {% if object.updated_at %}
            <dt class="col-sm-3">Last updated</dt>
            <dd class="col-sm-9">{{ object.updated_at }}</dd>
        {% endif %}
    </dl>
    {% if documents %}
    <div class=".col-md-4">
        <span class="oi oi-file"></span><a href='./registered_records.csv'>registered_records.csv</a>
    </div>
    {% endif %}
    <div class=".col-md-4">
            <a href='{% url "data_doc_upload" %}'><button type="button" class="btn btn-primary" {% if documents %}disabled{% endif %}>Register Documents</button></a>
            <button type="button" class="btn btn-primary" {% if not documents %}disabled{% endif %}>Upload Documents</button>
            <button type="button" class="btn btn-primary"  disabled>Download PDF Documents</button>
            <button type="button" class="btn btn-primary"  disabled>Upload Extracted Text</button>
    </div>
    <div class="col-md-2"><p></p></div>
    <div class="row-md-8 btn-group">
      <form method="get" action="{% static 'csv/register_records.csv' %}">
        <button type="button submit" class="btn btn-secondary">
            <span class="oi oi-file"></span>Registered Records CSV Template
        </button>
      </form>
      <div class="col-md-5"></div>
      <button type="button" class="btn btn-secondary"  disabled>
          <span class="oi oi-file"></span>Extracted Text CSV Template
      </button>
    </div>
    <br>
    <br>
{% if documents %}
<h4>{{ documents|length }} records registered</h4>
<table class="table table-sm table-bordered table-striped table-hover">
        <thead class="thead-inverse">
        <th>Title</th>
        <th>URL</th>
        <th>Product Category</th>
        <th>Matched</th>
        <th>Extracted</th>
        </thead>
        <tbody>
          {% for doc in documents %}
            <tr>
              <td>{{ doc.title }}</td>
              <td>
                  <a href="{{ doc.url }}" title="Link to {{ doc.title }}">{{ doc.url }}</a>
              </td>
              <td>{{ doc.product_category }}</td>
              <td align="center"><input type="checkbox" name="vehicle" value="Bike" {% if doc.matched %}checked{% endif %}></td>
              <td align="center"><input type="checkbox" name="vehicle" value="Bike" {% if doc.extracted %}checked{% endif %}></td>
            </tr>
          {% endfor %}
  </tbody>
</table>
{% endif %}

{% endblock %}
